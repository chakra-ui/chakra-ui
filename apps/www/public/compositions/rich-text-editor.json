{
  "type": "composition",
  "npmDependencies": [
    "@tiptap/react"
  ],
  "fileDependencies": [
    "compositions/ui/rich-text-editor-context",
    "compositions/ui/rich-text-editor-control"
  ],
  "id": "rich-text-editor",
  "file": {
    "name": "rich-text-editor.tsx",
    "content": "\"use client\"\n\nimport type { BoxProps, StackProps, SystemStyleObject } from \"@chakra-ui/react\"\nimport { Box, HStack, StackSeparator, defineStyle } from \"@chakra-ui/react\"\nimport { Editor, EditorContent } from \"@tiptap/react\"\nimport {\n  RichTextEditorContext,\n  useRichTextEditorContext,\n} from \"./rich-text-editor-context\"\nimport * as React from \"react\"\n\nconst proseMirrorBaseCss = defineStyle({\n  display: \"flex\",\n  flexDirection: \"column\",\n  borderWidth: \"1px\",\n  rounded: \"l2\",\n  lineHeight: \"1.5\",\n\n  \"--content-padding-x\": \"spacing.5\",\n  \"--content-padding-y\": \"spacing.5\",\n\n  \"& img.ProseMirror-selectednode\": {\n    outlineWidth: \"2px\",\n    outlineStyle: \"solid\",\n    outlineColor: \"blue.focusRing\",\n  },\n\n  \"& .ProseMirror\": {\n    outline: \"none\",\n    minHeight: \"var(--content-min-height)\",\n    px: \"var(--content-padding-x)\",\n    py: \"var(--content-padding-y)\",\n    \"& > * + *\": { marginTop: \"0.75em\" },\n    \"& h1\": {\n      fontSize: \"2.15em\",\n      letterSpacing: \"-0.02em\",\n      lineHeight: \"1.2em\",\n    },\n    \"& h2\": {\n      fontSize: \"1.65em\",\n      letterSpacing: \"-0.02em\",\n      lineHeight: \"1.3em\",\n    },\n    \"& h3\": {\n      fontSize: \"1.35em\",\n      letterSpacing: \"-0.01em\",\n      lineHeight: \"1.4em\",\n    },\n    \"& h4\": {\n      fontSize: \"1.15em\",\n      letterSpacing: \"-0.01em\",\n      lineHeight: \"1.5em\",\n    },\n    \"& h5\": {\n      fontSize: \"1em\",\n      letterSpacing: \"-0.01em\",\n      lineHeight: \"1.5em\",\n    },\n    \"& h6\": {\n      fontSize: \"0.875em\",\n      letterSpacing: \"-0.01em\",\n      lineHeight: \"1.5em\",\n    },\n    \"& h1, h2, h3, h4, h5, h6\": {\n      color: \"fg\",\n      fontWeight: \"600\",\n    },\n    \"& code\": {\n      bg: \"bg.muted\",\n      paddingInline: \"0.25em\",\n      rounded: \"sm\",\n      fontFamily: \"mono\",\n      fontSize: \"0.9em\",\n      borderWidth: \"1px\",\n    },\n    \"& pre\": {\n      bg: \"gray.900\",\n      color: \"gray.100\",\n      padding: \"4\",\n      rounded: \"lg\",\n      overflowX: \"auto\",\n      fontSize: \"sm\",\n      lineHeight: \"1.6\",\n      borderWidth: \"1px\",\n      borderColor: \"gray.700\",\n      boxShadow: \"inset 0 0 0 1px rgba(255,255,255,0.03)\",\n    },\n    \"& pre code\": {\n      bg: \"transparent\",\n      padding: \"0\",\n      fontFamily: \"mono\",\n      color: \"inherit\",\n      borderWidth: \"0\",\n    },\n    \"& blockquote\": {\n      borderStartWidth: \"4px\",\n      borderStartColor: \"border\",\n      paddingStart: \"4\",\n    },\n    \"& ul:not([data-type='taskList'])\": {\n      paddingInlineStart: \"1.25rem\",\n      listStyleType: \"disc\",\n    },\n    \"& ol:not([data-type='taskList'])\": {\n      paddingInlineStart: \"1.25rem\",\n      listStyleType: \"decimal\",\n    },\n    \"& ul ul\": {\n      listStyleType: \"circle\",\n    },\n    \"& ul ul ul\": {\n      listStyleType: \"square\",\n    },\n    \"& ul[data-type='taskList'] li\": {\n      listStyle: \"none\",\n      display: \"flex\",\n      alignItems: \"flex-start\",\n      gap: \"2\",\n      \"& input[type='checkbox']\": {\n        accentColor: \"colorPalette.solid\",\n        marginTop: \"1\",\n      },\n    },\n    \"& hr\": { my: \"4\" },\n    \"& a\": { color: \"blue.fg\", textDecoration: \"underline\" },\n    \"& em\": { fontStyle: \"italic\" },\n    \"& strong\": { fontWeight: \"bold\" },\n    \"& p.is-editor-empty:first-of-type::before\": {\n      content: \"attr(data-placeholder)\",\n      color: \"fg.muted\",\n      pointerEvents: \"none\",\n      float: \"left\",\n      height: \"0\",\n    },\n\n    \"& .node-hashtag\": {\n      layerStyle: \"fill.surface\",\n      px: \"0.25em\",\n      py: \"2px\",\n      rounded: \"l1\",\n    },\n  },\n\n  \"&[data-disabled] .ProseMirror\": {\n    pointerEvents: \"none\",\n    opacity: 0.5,\n    cursor: \"not-allowed\",\n  },\n})\n\nexport interface RichTextEditorProps extends BoxProps {\n  editor: Editor | null\n  disabled?: boolean\n}\n\nexport const RichTextEditorRoot = React.forwardRef<\n  HTMLDivElement,\n  RichTextEditorProps\n>(function RichTextEditorRoot(props, ref) {\n  const { editor, children, css, disabled, ...rest } = props\n  const contextValue = React.useMemo(() => ({ editor }), [editor])\n  return (\n    <RichTextEditorContext.Provider value={contextValue}>\n      <Box\n        ref={ref}\n        data-disabled={disabled || undefined}\n        css={[proseMirrorBaseCss, css]}\n        {...rest}\n      >\n        {children}\n      </Box>\n    </RichTextEditorContext.Provider>\n  )\n})\n\ntype RichTextEditorToolbarVariant = \"sticky\" | \"floating\" | \"fixed\"\n\nexport interface RichTextEditorToolbarProps extends StackProps {\n  variant?: RichTextEditorToolbarVariant\n  stickyOffset?: string\n}\n\nconst toolbarStylesMap: Record<\n  RichTextEditorToolbarVariant,\n  SystemStyleObject\n> = {\n  sticky: {\n    bg: \"bg\",\n    position: \"sticky\",\n    top: \"var(--sticky-offset, 0px)\",\n    zIndex: \"1\",\n    py: \"1.5\",\n    px: \"3\",\n  },\n  fixed: {\n    bg: \"bg\",\n    roundedTop: \"l2\",\n    borderBottomWidth: \"1px\",\n    py: \"1.5\",\n    px: \"3\",\n  },\n  floating: {\n    shadow: \"md\",\n    roundedTop: \"l2\",\n    bg: \"bg.panel\",\n    px: \"1.5\",\n    py: \"1.5\",\n  },\n}\n\nexport const RichTextEditorToolbar = React.forwardRef<\n  HTMLDivElement,\n  RichTextEditorToolbarProps\n>(function RichTextEditorToolbar(props, ref) {\n  const { variant = \"fixed\", stickyOffset = \"0px\", ...rest } = props\n  const variantStyles = toolbarStylesMap[variant]\n\n  return (\n    <HStack\n      ref={ref}\n      flexWrap=\"wrap\"\n      separator={<StackSeparator h=\"5\" alignSelf=\"center\" />}\n      {...rest}\n      style={{\n        [\"--sticky-offset\" as string]: stickyOffset,\n        ...rest.style,\n      }}\n      css={[variantStyles, rest.css]}\n    />\n  )\n})\n\nexport const RichTextEditorFooter = React.forwardRef<\n  HTMLDivElement,\n  StackProps\n>(function RichTextEditorFooter(props, ref) {\n  return <HStack ref={ref} gap=\"1\" borderTopWidth=\"1px\" p=\"3\" {...props} />\n})\n\nexport interface RichTextEditorContentProps\n  extends Omit<React.ComponentProps<typeof EditorContent>, \"editor\"> {}\n\nexport const RichTextEditorContent = React.forwardRef<\n  HTMLDivElement,\n  RichTextEditorContentProps\n>(function RichTextEditorContent(props, ref) {\n  const { editor } = useRichTextEditorContext()\n  if (!editor) return null\n  return <EditorContent editor={editor} {...props} innerRef={ref} />\n})\n\nexport interface RichTextEditorControlGroupProps extends StackProps {}\n\nexport const RichTextEditorControlGroup = React.forwardRef<\n  HTMLDivElement,\n  RichTextEditorControlGroupProps\n>(function RichTextEditorButtonGroup(props, ref) {\n  return <HStack ref={ref} gap=\"1\" {...props} />\n})\n\nexport const RichTextEditor = {\n  Root: RichTextEditorRoot,\n  Toolbar: RichTextEditorToolbar,\n  Content: RichTextEditorContent,\n  ControlGroup: RichTextEditorControlGroup,\n  Footer: RichTextEditorFooter,\n} as const\n\nexport * as Control from \"compositions/ui/rich-text-editor-control\"\n\nexport {\n  createBooleanControl,\n  createSelectControl,\n  createSwatchControl,\n} from \"compositions/ui/rich-text-editor-control\"\n\nexport { useRichTextEditorContext } from \"compositions/ui/rich-text-editor-context\"\n"
  },
  "component": "RichTextEditor"
}